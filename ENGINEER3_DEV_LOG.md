# Engineer 3 å¼€å‘æ—¥å¿— - AI Integration Specialist

**å·¥ç¨‹å¸ˆ**: Senior Engineer 3
**èŒè´£**: OpenAI é›†æˆã€AI é¢è¯•é€»è¾‘ã€Mock AI æœåŠ¡
**å¼€å‘å‘¨æœŸ**: Week 1 (Day 1-5)
**æ—¥æœŸ**: 2025-11-18

---

## ğŸ“‹ ä»»åŠ¡æ¦‚è§ˆ

æ ¹æ®å¹¶è¡Œå¼€å‘è®¡åˆ’ (PARALLEL_DEVELOPMENT_PLAN.md),æˆ‘çš„æ ¸å¿ƒä»»åŠ¡æ˜¯:

### Week 1 ä»»åŠ¡
- [x] **Day 1-2**: OpenAI é›†æˆè®¾è®¡
  - è®¾è®¡ AI é¢è¯•å®˜ç³»ç»Ÿ prompt
  - å®šä¹‰å¯¹è¯æµç¨‹çŠ¶æ€æœº
  - è®¾è®¡ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥
  - åˆ›å»º prompt æ¨¡æ¿åº“

- [x] **Day 3-4**: AI Service å®ç°
  - initializeInterview(problem)
  - sendMessage(userMessage, codeContext)
  - generateFeedback(session)
  - generateHint(codeState)

- [x] **Day 5**: Mock AI å“åº”ç³»ç»Ÿ
  - è§„åˆ™å¼•æ“ç”¨äºå¼€å‘/æµ‹è¯•
  - é¢„å®šä¹‰å“åº”åº“
  - A/B æµ‹è¯•ä¸åŒ prompt ç­–ç•¥

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ç³»ç»Ÿç»„ä»¶

æˆ‘è®¾è®¡å¹¶å®ç°äº†ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶:

```
src/services/
â”œâ”€â”€ openai.js                    # ä¸»æœåŠ¡(é‡æ„ç‰ˆ)
â”œâ”€â”€ interviewStateMachine.js     # é¢è¯•çŠ¶æ€æœº(æ–°)
â”œâ”€â”€ promptTemplates.js           # Prompt æ¨¡æ¿åº“(æ–°)
â””â”€â”€ mockAIEngine.js             # æ™ºèƒ½ Mock AI å¼•æ“(æ–°)
```

### 1ï¸âƒ£ é¢è¯•çŠ¶æ€æœº (Interview State Machine)

**æ–‡ä»¶**: `src/services/interviewStateMachine.js`

**è®¾è®¡ç†å¿µ**:
é¢è¯•æ˜¯ä¸€ä¸ªæœ‰æ˜ç¡®é˜¶æ®µçš„è¿‡ç¨‹,AI çš„è¡Œä¸ºåº”è¯¥æ ¹æ®ä¸åŒé˜¶æ®µåŠ¨æ€è°ƒæ•´ã€‚

**çŠ¶æ€å®šä¹‰**:
```javascript
INTRO         â†’ ä»‹ç»é—®é¢˜
CLARIFICATION â†’ å›ç­”æ¾„æ¸…é—®é¢˜
CODING        â†’ å€™é€‰äººç¼–ç ä¸­
STUCK         â†’ å€™é€‰äººå¡ä½(3åˆ†é’Ÿæ— è¿›å±•)
TESTING       â†’ è¿è¡Œæµ‹è¯•
DEBUGGING     â†’ è°ƒè¯•å¤±è´¥çš„æµ‹è¯•
COMPLEXITY    â†’ è®¨è®ºå¤æ‚åº¦
OPTIMIZATION  â†’ è®¨è®ºä¼˜åŒ–
FEEDBACK      â†’ æœ€ç»ˆåé¦ˆ
```

**æ ¸å¿ƒåŠŸèƒ½**:
- è‡ªåŠ¨æ£€æµ‹çŠ¶æ€è½¬æ¢(åŸºäºç”¨æˆ·è¡Œä¸ºã€ä»£ç å˜åŒ–ã€æµ‹è¯•ç»“æœ)
- ä¸ºæ¯ä¸ªé˜¶æ®µæä¾›ç‰¹å®šçš„ç³»ç»ŸæŒ‡ä»¤
- è·Ÿè¸ªä¼šè¯ç»Ÿè®¡æ•°æ®(ä»£ç æ”¹åŠ¨æ¬¡æ•°ã€æµ‹è¯•è¿è¡Œæ¬¡æ•°ç­‰)

**å…³é”®é€»è¾‘**:
```javascript
// è‡ªåŠ¨æ£€æµ‹è½¬æ¢
if (code changed && length > 50) â†’ CODING
if (no code changes for 3+ min) â†’ STUCK
if (tests all pass) â†’ COMPLEXITY
if (tests fail) â†’ DEBUGGING
```

---

### 2ï¸âƒ£ Prompt æ¨¡æ¿åº“ (Prompt Templates)

**æ–‡ä»¶**: `src/services/promptTemplates.js`

**è®¾è®¡ç†å¿µ**:
ä¸åŒåœºæ™¯éœ€è¦ä¸åŒçš„ prompt ç­–ç•¥ã€‚ä½¿ç”¨æ¨¡æ¿åŒ–æ–¹æ³•å¯ä»¥:
- ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ prompts
- æ–¹ä¾¿ A/B æµ‹è¯•ä¸åŒç­–ç•¥
- æ”¯æŒæœªæ¥çš„å¤šè¯­è¨€å’Œä¸ªæ€§åŒ–

**ä¸»è¦ç»„ä»¶**:

1. **BASE_SYSTEM_PROMPT**: åŸºç¡€ç³»ç»Ÿ prompt
   - å®šä¹‰ AI çš„æ ¸å¿ƒèº«ä»½å’ŒåŸåˆ™
   - é€‚ç”¨äºæ‰€æœ‰å¯¹è¯

2. **PHASE_PROMPTS**: é˜¶æ®µç‰¹å®šæŒ‡ä»¤
   - æ¯ä¸ªé¢è¯•é˜¶æ®µæœ‰ä¸“é—¨çš„æŒ‡ä»¤
   - æŒ‡å¯¼ AI åœ¨è¯¥é˜¶æ®µçš„è¡Œä¸º

3. **PromptBuilder**: ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ prompt æ„å»ºå™¨
   - `buildHintPrompt()` - æ ¹æ®å¡ä½æ—¶é—´å’Œä»£ç ç”Ÿæˆæç¤º
   - `buildCodeReviewPrompt()` - ä»£ç å®¡æŸ¥
   - `buildFeedbackPrompt()` - ç»¼åˆåé¦ˆç”Ÿæˆ
   - `buildComplexityPrompt()` - å¤æ‚åº¦è®¨è®º

4. **RESPONSE_STYLES**: å“åº”é£æ ¼é…ç½®
   - SUPPORTIVE - é€‚åˆåˆå­¦è€…
   - PROFESSIONAL - æ ‡å‡† FAANG é£æ ¼
   - CHALLENGING - é€‚åˆé«˜çº§å€™é€‰äºº

5. **FOLLOW_UP_QUESTIONS**: å¸¸è§è·Ÿè¿›é—®é¢˜åº“
   - æŒ‰ç±»åˆ«ç»„ç»‡(å¤æ‚åº¦ã€è¾¹ç•Œæƒ…å†µã€ä»£ç è´¨é‡ç­‰)

---

### 3ï¸âƒ£ Mock AI å¼•æ“ (Mock AI Engine)

**æ–‡ä»¶**: `src/services/mockAIEngine.js`

**è®¾è®¡ç†å¿µ**:
åœ¨å¼€å‘é˜¶æ®µ,æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ™ºèƒ½çš„ Mock ç³»ç»Ÿæ¥:
- æ— éœ€ API key å³å¯æµ‹è¯•
- èŠ‚çœå¼€å‘æˆæœ¬
- æä¾›ä¸€è‡´çš„å“åº”ç”¨äºæµ‹è¯•
- æ”¯æŒå¿«é€Ÿè¿­ä»£

**æ ¸å¿ƒåŠŸèƒ½**:

1. **æ„å›¾æ£€æµ‹ (Intent Detection)**
   ```javascript
   GREETING      - é—®å€™
   READY         - å‡†å¤‡å¼€å§‹
   QUESTION_ASKING - æé—®
   HINT_REQUEST  - è¯·æ±‚æç¤º
   COMPLEXITY    - è®¨è®ºå¤æ‚åº¦
   THINKING_ALOUD - æ€è€ƒè¿‡ç¨‹
   ```

2. **ä¸Šä¸‹æ–‡æ„ŸçŸ¥å“åº”**
   - æ ¹æ®å½“å‰é˜¶æ®µ + ç”¨æˆ·æ„å›¾é€‰æ‹©å“åº”
   - åˆ†æä»£ç çŠ¶æ€(æ˜¯å¦æœ‰å¾ªç¯ã€å‡½æ•°ã€æ³¨é‡Šç­‰)
   - è€ƒè™‘å¯¹è¯å†å²é•¿åº¦

3. **æ™ºèƒ½æç¤ºç”Ÿæˆ**
   - æ ¹æ®å¡ä½æ—¶é—´æ¸è¿›å¼ç»™å‡ºæç¤º
   - ä½¿ç”¨é—®é¢˜çš„é¢„å®šä¹‰ hints
   - é¿å…ç›´æ¥ç»™å‡ºç­”æ¡ˆ

4. **ç»¼åˆåé¦ˆè¯„åˆ†**
   ç®—æ³•è€ƒè™‘å¤šä¸ªå› ç´ :
   - æµ‹è¯•é€šè¿‡ç‡(40åˆ†)
   - ä»£ç è´¨é‡(30åˆ†) - æ˜¯å¦æœ‰å‡½æ•°ã€æ³¨é‡Šç­‰
   - æ—¶é—´æ•ˆç‡(30åˆ†) - ä¸é¢„æœŸæ—¶é—´å¯¹æ¯”

**å“åº”ç¤ºä¾‹**:
```javascript
// INTRO é˜¶æ®µ + GREETING æ„å›¾
â†’ "Hello! Great to meet you. I'm excited to work through this problem with you today."

// STUCK é˜¶æ®µ + HINT_REQUEST æ„å›¾
â†’ "I can see you're stuck. Let me help: have you thought about using a hash map?"
```

---

### 4ï¸âƒ£ é‡æ„çš„ OpenAI æœåŠ¡

**æ–‡ä»¶**: `src/services/openai.js` (é‡æ„)

**ä¸»è¦æ”¹è¿›**:

1. **é›†æˆçŠ¶æ€æœº**
   ```javascript
   this.stateMachine = new InterviewStateMachine();
   // è‡ªåŠ¨è¿½è¸ªé¢è¯•é˜¶æ®µ,è°ƒæ•´ AI è¡Œä¸º
   ```

2. **æ”¯æŒ Mock å’ŒçœŸå® API**
   ```javascript
   USE_MOCK_AI = true/false  // ç¯å¢ƒå˜é‡æ§åˆ¶
   ```

3. **ä¸Šä¸‹æ–‡è¿½è¸ª**
   - è¿½è¸ªä»£ç å˜åŒ–
   - è®°å½•æœ€åç¼–è¾‘æ—¶é—´
   - è‡ªåŠ¨æ£€æµ‹"å¡ä½"çŠ¶æ€

4. **å¢å¼ºçš„æ–¹æ³•ç­¾å**
   ```javascript
   // ä¹‹å‰
   sendMessage(userMessage, codeContext)

   // ç°åœ¨
   sendMessage(userMessage, codeContext, testResults)
   // ç°åœ¨æ”¯æŒæµ‹è¯•ç»“æœ,è§¦å‘çŠ¶æ€è½¬æ¢
   ```

5. **æ–°å¢æ–¹æ³•**
   - `generateHint(code)` - æ™ºèƒ½æç¤ºç”Ÿæˆ
   - `getCurrentPhase()` - è·å–å½“å‰é˜¶æ®µ
   - `getSessionStats()` - ä¼šè¯ç»Ÿè®¡
   - `updateTestResults(testResults)` - æ‰‹åŠ¨æ›´æ–°æµ‹è¯•ç»“æœ

6. **æ”¹è¿›çš„ initializeInterview**
   - æ¥å—å®Œæ•´çš„ problem å¯¹è±¡(ä¸åªæ˜¯æè¿°)
   - æ ¼å¼åŒ–é—®é¢˜å±•ç¤º(æ ‡é¢˜ã€éš¾åº¦ã€çº¦æŸã€ç¤ºä¾‹)
   - åˆå§‹åŒ–æ‰€æœ‰è¿½è¸ªå˜é‡

---

## ğŸ¯ è®¾è®¡å†³ç­–

### ä¸ºä»€ä¹ˆä½¿ç”¨çŠ¶æ€æœº?

**é—®é¢˜**: ä¹‹å‰çš„å®ç°ä½¿ç”¨ç®€å•çš„å…³é”®è¯åŒ¹é…,æ— æ³•ç†è§£å¯¹è¯çš„"ä¸Šä¸‹æ–‡"å’Œ"è¿›å±•"ã€‚

**è§£å†³æ–¹æ¡ˆ**: çŠ¶æ€æœºè®© AI çŸ¥é“:
- ç°åœ¨å¤„äºé¢è¯•çš„å“ªä¸ªé˜¶æ®µ
- åº”è¯¥åšä»€ä¹ˆ(ä»‹ç»ã€æç¤ºã€è¯„ä¼°ç­‰)
- ä»€ä¹ˆæ—¶å€™è½¬æ¢åˆ°ä¸‹ä¸€é˜¶æ®µ

**å¥½å¤„**:
- AI è¡Œä¸ºæ›´è‡ªç„¶ã€æ›´åƒçœŸå®é¢è¯•å®˜
- é¿å…ä¸åˆæ—¶å®œçš„å“åº”(æ¯”å¦‚åœ¨ç”¨æˆ·åˆšå¼€å§‹ç¼–ç æ—¶å°±è®¨è®ºå¤æ‚åº¦)
- å¯ä»¥è¿½è¸ªé¢è¯•è¿›åº¦

### ä¸ºä»€ä¹ˆéœ€è¦ Prompt æ¨¡æ¿åº“?

**é—®é¢˜**: Prompt æ•£è½åœ¨ä»£ç å„å¤„,éš¾ä»¥ç®¡ç†å’Œä¼˜åŒ–ã€‚

**è§£å†³æ–¹æ¡ˆ**: é›†ä¸­å¼æ¨¡æ¿ç®¡ç†ã€‚

**å¥½å¤„**:
- ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ prompts
- æ–¹ä¾¿ A/B æµ‹è¯•(æ¯”å¦‚æµ‹è¯•ä¸åŒçš„æç¤ºç­–ç•¥)
- æ”¯æŒæœªæ¥çš„å¤šè¯­è¨€ã€ä¸ªæ€§åŒ–
- æ›´å®¹æ˜“å®¡æŸ¥å’Œæ”¹è¿› prompts

### ä¸ºä»€ä¹ˆéœ€è¦æ™ºèƒ½ Mock AI?

**é—®é¢˜**:
- æ¯æ¬¡æµ‹è¯•éƒ½è°ƒç”¨çœŸå® API æˆæœ¬å¤ªé«˜
- å¼€å‘æ—¶å¯èƒ½æ²¡æœ‰ API key
- çœŸå® API å“åº”æ—¶é—´é•¿,å½±å“å¼€å‘æ•ˆç‡

**è§£å†³æ–¹æ¡ˆ**: è§„åˆ™å¼•æ“ + ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ Mock ç³»ç»Ÿã€‚

**å¥½å¤„**:
- é›¶æˆæœ¬å¼€å‘å’Œæµ‹è¯•
- å“åº”å¿«é€Ÿä¸”å¯é¢„æµ‹
- å¯ä»¥æ¨¡æ‹Ÿå„ç§åœºæ™¯(å¡ä½ã€æˆåŠŸã€å¤±è´¥ç­‰)
- ä¸ºçœŸå® API æä¾›äº† fallback

---

## ğŸ”„ ä¸å…¶ä»–å·¥ç¨‹å¸ˆçš„åä½œ

### ä¾èµ–å…³ç³»

**æˆ‘ä¾èµ–**:
- Engineer 2: Firebase Cloud Functions æ¡†æ¶(ç”¨äºéƒ¨ç½² OpenAI è°ƒç”¨)
- Engineer 1: å‰ç«¯ç»„ä»¶è°ƒç”¨æˆ‘çš„æœåŠ¡

**é˜»å¡**:
- ç›®å‰æ— é˜»å¡ - ä½¿ç”¨ Mock AI å¯ç‹¬ç«‹å¼€å‘

### API æ¥å£

ä¸ºå‰ç«¯(Engineer 1)æä¾›çš„æ¥å£:

```javascript
import openAIService from './services/openai.js';

// åˆå§‹åŒ–é¢è¯•
const introMessage = openAIService.initializeInterview(problem);

// å‘é€æ¶ˆæ¯
const response = await openAIService.sendMessage(
  "Can you clarify the constraints?",
  currentCode,
  testResults
);

// è¯·æ±‚æç¤º
const hint = await openAIService.generateHint(currentCode);

// ç”Ÿæˆåé¦ˆ
const feedback = await openAIService.generateFeedback({
  code: finalCode,
  testResults: { passed: 3, total: 5 },
  duration: 1200000 // 20 minutes
});

// è·å–å½“å‰é˜¶æ®µ
const phase = openAIService.getCurrentPhase(); // "CODING", "STUCK", etc.

// è·å–ç»Ÿè®¡
const stats = openAIService.getSessionStats();
```

---

## ğŸ“Š æµ‹è¯•ç­–ç•¥

### Mock AI æµ‹è¯•è¦†ç›–

Mock AI å¼•æ“è¦†ç›–ä»¥ä¸‹åœºæ™¯:

1. **å„ç§é¢è¯•é˜¶æ®µ**
   - âœ… INTRO - é—®å€™ã€ä»‹ç»
   - âœ… CLARIFICATION - å›ç­”é—®é¢˜
   - âœ… CODING - ç¼–ç é¼“åŠ±
   - âœ… STUCK - æä¾›æç¤º
   - âœ… DEBUGGING - è°ƒè¯•æŒ‡å¯¼
   - âœ… COMPLEXITY - å¤æ‚åº¦è®¨è®º
   - âœ… FEEDBACK - ç»¼åˆåé¦ˆ

2. **ä¸åŒç”¨æˆ·æ„å›¾**
   - âœ… é—®å€™
   - âœ… æé—®
   - âœ… è¯·æ±‚å¸®åŠ©
   - âœ… æ€è€ƒè¿‡ç¨‹
   - âœ… å®Œæˆæ ‡å¿—

3. **ä»£ç çŠ¶æ€è¯†åˆ«**
   - âœ… æ— ä»£ç 
   - âœ… æœ‰å¾ªç¯
   - âœ… æœ‰å‡½æ•°
   - âœ… æœ‰æ³¨é‡Š
   - âœ… å¤æ‚åº¦ä¼°ç®—

### çŠ¶æ€è½¬æ¢æµ‹è¯•

éœ€è¦æµ‹è¯•çš„è½¬æ¢:
- [x] ç”¨æˆ·å¼€å§‹ç¼–ç  â†’ CODING
- [x] 3åˆ†é’Ÿæ— ä»£ç å˜åŒ– â†’ STUCK
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ â†’ COMPLEXITY
- [x] æµ‹è¯•å¤±è´¥ â†’ DEBUGGING
- [x] æ‰‹åŠ¨ç»“æŸ â†’ FEEDBACK

---

## ğŸš€ æœªæ¥æ”¹è¿› (Week 2-3)

### Week 2 ä»»åŠ¡

1. **ä¸Šä¸‹æ–‡æ„ŸçŸ¥é€»è¾‘å¢å¼º**
   - åˆ†æä»£ç æ¨¡å¼(æ£€æµ‹å¸¸è§é”™è¯¯)
   - è¯†åˆ«ç”¨æˆ·æ˜¯å¦ç†è§£é—®é¢˜
   - æ£€æµ‹ä»£ç è´¨é‡é—®é¢˜

2. **AI é¢è¯•æµç¨‹å¼•æ“å®Œå–„**
   - å®ç°æ›´æ™ºèƒ½çš„çŠ¶æ€è½¬æ¢è§¦å‘å™¨
   - æ·»åŠ æ—¶é—´ç®¡ç†(45åˆ†é’Ÿé¢è¯•å€’è®¡æ—¶)
   - æ”¯æŒå¤šè½®æç¤º(æ¸è¿›å¼æç¤º)

3. **åé¦ˆç”Ÿæˆå™¨æ”¹è¿›**
   - ä½¿ç”¨çœŸå® OpenAI API ç”Ÿæˆæ·±åº¦åé¦ˆ
   - è§£æ AI å“åº”ä¸ºç»“æ„åŒ–æ•°æ®
   - æ·»åŠ è¯„åˆ†æ ‡å‡†(é—®é¢˜ç†è§£ã€ä»£ç è´¨é‡ã€æ²Ÿé€šç­‰)

### Week 3 ä»»åŠ¡ (Voice Integration)

1. **è¯­éŸ³è½¬æ–‡å­— (Whisper API)**
   - å½•éŸ³åŠŸèƒ½é›†æˆ
   - ä¸Šä¼ éŸ³é¢‘åˆ° Firebase Storage
   - è°ƒç”¨ Whisper API
   - è¿”å›è½¬å½•æ–‡æœ¬

2. **æ–‡å­—è½¬è¯­éŸ³ (TTS API)**
   - æ¥æ”¶ AI æ–‡æœ¬å“åº”
   - è°ƒç”¨ OpenAI TTS API
   - ç¼“å­˜éŸ³é¢‘æ–‡ä»¶
   - è¿”å›éŸ³é¢‘ URL

3. **è¯­éŸ³å·¥ä½œæµ**
   ```
   ç”¨æˆ·è¯´è¯ â†’ å½•éŸ³ â†’ Whisper â†’ æ–‡æœ¬ â†’ GPT-4 â†’ TTS â†’ æ’­æ”¾
   ```

---

## ğŸ“ ä»£ç è´¨é‡

### ä»£ç è§„èŒƒ

- âœ… ä½¿ç”¨ ES6+ è¯­æ³•
- âœ… è¯¦ç»†çš„ JSDoc æ³¨é‡Š
- âœ… æ¸…æ™°çš„å‡½æ•°å‘½å
- âœ… æ¨¡å—åŒ–è®¾è®¡(æ¯ä¸ªæ–‡ä»¶å•ä¸€èŒè´£)

### è®¾è®¡æ¨¡å¼

- **çŠ¶æ€æœºæ¨¡å¼** - InterviewStateMachine
- **ç­–ç•¥æ¨¡å¼** - ä¸åŒçš„å“åº”ç­–ç•¥(SUPPORTIVE, PROFESSIONAL, CHALLENGING)
- **æ¨¡æ¿æ–¹æ³•æ¨¡å¼** - PromptBuilder
- **å•ä¾‹æ¨¡å¼** - OpenAIService

---

## ğŸ’¡ å…³é”®æ´å¯Ÿ

### 1. Mock First å¼€å‘

ä½¿ç”¨ Mock AI å…è®¸æˆ‘:
- å¿«é€Ÿè¿­ä»£ UI/UX
- æ— éœ€ç­‰å¾…çœŸå® API
- èŠ‚çœå¼€å‘æˆæœ¬
- æä¾›ç¨³å®šçš„æµ‹è¯•ç¯å¢ƒ

### 2. çŠ¶æ€æœºçš„ä»·å€¼

çŠ¶æ€æœºä¸ä»…ä»…æ˜¯æŠ€æœ¯å®ç°,å®ƒåæ˜ äº†:
- çœŸå®é¢è¯•çš„æµç¨‹
- AI åº”è¯¥å¦‚ä½•"æ€è€ƒ"å½“å‰æƒ…å†µ
- ä½•æ—¶æä¾›å¸®åŠ©,ä½•æ—¶ä¿æŒå®‰é™

### 3. Prompt Engineering æ˜¯æ ¸å¿ƒ

å¥½çš„ Prompt è®¾è®¡ç›´æ¥å½±å“:
- AI å“åº”è´¨é‡
- ç”¨æˆ·ä½“éªŒ
- é¢è¯•çœŸå®æ„Ÿ

èŠ±æ—¶é—´è®¾è®¡å’Œæµ‹è¯•ä¸åŒçš„ prompt ç­–ç•¥æ˜¯å€¼å¾—çš„ã€‚

---

## ğŸ”§ ç¯å¢ƒé…ç½®

### ç¯å¢ƒå˜é‡

åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ :

```env
# OpenAI é…ç½®
VITE_OPENAI_API_KEY=sk-your-api-key-here
VITE_USE_MOCK_AI=true  # å¼€å‘æ—¶è®¾ä¸º true,ç”Ÿäº§æ—¶è®¾ä¸º false

# å¯é€‰é…ç½®
VITE_OPENAI_MODEL=gpt-4  # æˆ– gpt-3.5-turbo
```

### åˆ‡æ¢ Mock/Real AI

```javascript
// å¼€å‘æ¨¡å¼ - ä½¿ç”¨ Mock AI
VITE_USE_MOCK_AI=true

// ç”Ÿäº§æ¨¡å¼ - ä½¿ç”¨çœŸå® OpenAI API
VITE_USE_MOCK_AI=false
```

---

## ğŸ“ˆ æ€§èƒ½è€ƒè™‘

### Mock AI
- âš¡ å“åº”æ—¶é—´: ~800-1500ms (æ¨¡æ‹Ÿå»¶è¿Ÿ)
- ğŸ’° æˆæœ¬: $0
- ğŸ¯ å‡†ç¡®æ€§: è§„åˆ™é©±åŠ¨,ä¸€è‡´ä½†æœ‰é™

### Real OpenAI API
- âš¡ å“åº”æ—¶é—´: ~2-5ç§’
- ğŸ’° æˆæœ¬: ~$0.02-0.05 per request (GPT-4)
- ğŸ¯ å‡†ç¡®æ€§: é«˜åº¦çµæ´»,ç†è§£ä¸Šä¸‹æ–‡

### ä¼˜åŒ–ç­–ç•¥
- ä½¿ç”¨ GPT-3.5-turbo é™ä½æˆæœ¬(~10x cheaper)
- ç¼“å­˜å¸¸è§é—®é¢˜çš„å“åº”
- ä½¿ç”¨ streaming æ”¹å–„æ„ŸçŸ¥å»¶è¿Ÿ
- Rate limiting é˜²æ­¢æ»¥ç”¨

---

## âœ… å®Œæˆçš„äº¤ä»˜ç‰©

- [x] **é¢è¯•çŠ¶æ€æœº** - `interviewStateMachine.js`
- [x] **Prompt æ¨¡æ¿åº“** - `promptTemplates.js`
- [x] **Mock AI å¼•æ“** - `mockAIEngine.js`
- [x] **é‡æ„çš„ OpenAI æœåŠ¡** - `openai.js`
- [x] **å¼€å‘æ–‡æ¡£** - æœ¬æ–‡æ¡£

---

## ğŸ“ ç»éªŒæ€»ç»“

### æˆåŠŸä¹‹å¤„

1. **æ¶æ„æ¸…æ™°**: æ¯ä¸ªç»„ä»¶èŒè´£æ˜ç¡®,æ˜“äºç»´æŠ¤
2. **å¯æµ‹è¯•æ€§å¼º**: Mock AI è®©æµ‹è¯•å˜å¾—ç®€å•
3. **æ‰©å±•æ€§å¥½**: æ·»åŠ æ–°çš„é¢è¯•é˜¶æ®µæˆ–å“åº”ç­–ç•¥å¾ˆå®¹æ˜“
4. **å‘åå…¼å®¹**: ä¿ç•™äº†æ—§æ¥å£,ä¸å½±å“ç°æœ‰ä»£ç 

### å¯ä»¥æ”¹è¿›çš„åœ°æ–¹

1. **çŠ¶æ€è½¬æ¢è§¦å‘**: å¯ä»¥æ›´æ™ºèƒ½(ä½¿ç”¨ä»£ç é™æ€åˆ†æ)
2. **Prompt ç‰ˆæœ¬ç®¡ç†**: éœ€è¦ç³»ç»ŸåŒ–çš„ A/B æµ‹è¯•æ¡†æ¶
3. **é”™è¯¯å¤„ç†**: éœ€è¦æ›´å¥å£®çš„é”™è¯¯æ¢å¤æœºåˆ¶
4. **æ€§èƒ½ç›‘æ§**: æ·»åŠ è¯¦ç»†çš„æ—¥å¿—å’ŒæŒ‡æ ‡è¿½è¸ª

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [OpenAI API Documentation](https://platform.openai.com/docs)
- [Prompt Engineering Guide](https://www.promptingguide.ai/)
- [State Machine Pattern](https://refactoring.guru/design-patterns/state)
- [PARALLEL_DEVELOPMENT_PLAN.md](./PARALLEL_DEVELOPMENT_PLAN.md)
- [PRODUCT_PLAN.md](./PRODUCT_PLAN.md)

---

**ä¸‹ä¸€æ­¥**:
- ä¸ Engineer 1 åè°ƒå‰ç«¯é›†æˆ
- å‡†å¤‡ Week 2 çš„æ·±åº¦åŠŸèƒ½å®ç°
- å¼€å§‹è§„åˆ’ Week 3 çš„è¯­éŸ³åŠŸèƒ½

**çŠ¶æ€**: âœ… Week 1 ä»»åŠ¡å…¨éƒ¨å®Œæˆ âœ… Week 2 ä»»åŠ¡å…¨éƒ¨å®Œæˆ,å‡†å¤‡è¿›å…¥ Week 3

---

## ğŸš€ Week 2 å¼€å‘æ€»ç»“ (Day 1-5)

### å®Œæˆçš„ä»»åŠ¡

#### 1. Firebase Cloud Functions (Day 1-2) âœ…

åˆ›å»ºäº†å®‰å…¨çš„æœåŠ¡å™¨ç«¯ OpenAI API è°ƒç”¨:

**æ–‡ä»¶**: `/functions/interviews/aiInterviewer.js`

**å®ç°çš„ Functions**:
- `initializeInterview` - åˆå§‹åŒ–é¢è¯•ä¼šè¯
- `chatWithAI` - ä¸»è¦å¯¹è¯æ¥å£
- `generateHint` - ç”Ÿæˆæ™ºèƒ½æç¤º
- `generateFeedback` - ç”Ÿæˆç»¼åˆåé¦ˆ

**ç‰¹æ€§**:
- âœ… å®‰å…¨çš„ API key ç®¡ç†(ä½¿ç”¨ Firebase Secrets)
- âœ… ç”¨æˆ·è®¤è¯éªŒè¯
- âœ… æˆæœ¬è¿½è¸ª(æ¯æ¬¡è°ƒç”¨è¿”å› token ä½¿ç”¨å’Œæˆæœ¬)
- âœ… JSON å“åº”æ ¼å¼åŒ–
- âœ… é”™è¯¯å¤„ç†å’Œé‡è¯•é€»è¾‘

#### 2. ä»£ç é™æ€åˆ†æå·¥å…· (Day 2-3) âœ…

**æ–‡ä»¶**: `/src/services/codeAnalyzer.js`

**æ ¸å¿ƒåŠŸèƒ½**:
- **å…¨é¢åˆ†æ**: ä¸€æ¬¡è°ƒç”¨è·å–æ‰€æœ‰æŒ‡æ ‡
- **åŸºç¡€æŒ‡æ ‡**: ä»£ç è¡Œæ•°ã€æ³¨é‡Šã€å¹³å‡è¡Œé•¿åº¦
- **ç»“æ„åˆ†æ**: å‡½æ•°ã€ç±»ã€å¾ªç¯ã€æ¡ä»¶è¯­å¥æ£€æµ‹
- **å¤æ‚åº¦ä¼°ç®—**: æ—¶é—´/ç©ºé—´å¤æ‚åº¦ã€åµŒå¥—å¾ªç¯æ·±åº¦
- **è´¨é‡è¯„ä¼°**: å‘½åè§„èŒƒã€é”™è¯¯å¤„ç†ã€å¯è¯»æ€§è¯„åˆ†
- **æ¨¡å¼è¯†åˆ«**: æ£€æµ‹ç®—æ³•æ¨¡å¼(åŒæŒ‡é’ˆã€æ»‘åŠ¨çª—å£ã€DPã€äºŒåˆ†æœç´¢ç­‰)
- **é—®é¢˜æ£€æµ‹**: æ— é™å¾ªç¯ã€æœªå®šä¹‰å˜é‡ã€é«˜å¤æ‚åº¦è­¦å‘Š
- **è¿›åº¦ä¼°ç®—**: 0-100% å®Œæˆåº¦è¯„ä¼°

**æ”¯æŒçš„è¯­è¨€**: Python, JavaScript, Java

**ç¤ºä¾‹è¾“å‡º**:
```javascript
{
  basic: { totalLines: 25, codeLines: 18, commentLines: 3 },
  structure: { functionCount: 1, loopCount: 1, conditionalCount: 2 },
  complexity: { timeComplexity: 'O(n)', spaceComplexity: 'O(n)' },
  quality: { score: 75, hasFunctions: true, hasComments: true },
  patterns: { usesHashMap: true, usesTwoPointers: false },
  issues: [],
  progress: 85
}
```

#### 3. å¢å¼ºçš„çŠ¶æ€è½¬æ¢è§¦å‘å™¨ (Day 3) âœ…

**æ›´æ–°**: `/src/services/interviewStateMachine.js`

**æ”¹è¿›**:
- é›†æˆä»£ç åˆ†æå™¨,åŸºäºä»£ç è´¨é‡å’Œè¿›åº¦è§¦å‘è½¬æ¢
- æ™ºèƒ½æ£€æµ‹"å¡ä½"çŠ¶æ€(è€ƒè™‘ä»£ç è¿›åº¦,ä¸åªæ˜¯æ—¶é—´)
- ä» STUCK è‡ªåŠ¨æ¢å¤åˆ° CODING(å½“è¿›åº¦>50%)
- æ·»åŠ  `getCodeInsights()` æ–¹æ³•è¿”å›å®æ—¶ä»£ç æ´å¯Ÿ

**æ–°çš„è½¬æ¢é€»è¾‘**:
```javascript
// ä¹‹å‰: ç®€å•çš„æ—¶é—´æ£€æµ‹
if (timeSinceLastChange > 3min) â†’ STUCK

// ç°åœ¨: æ™ºèƒ½æ£€æµ‹
if (isCandidateStuck(code, time)) { // è€ƒè™‘ä»£ç è¿›åº¦å’Œæ—¶é—´
  â†’ STUCK
}
```

#### 4. å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç† (Day 3-4) âœ…

**æ–‡ä»¶**: `/src/services/conversationManager.js`

**ConversationManager**:
- å¯¹è¯å†å²å‹ç¼©(ä¿æŒæœ€ç›¸å…³çš„æ¶ˆæ¯)
- Token ä¼°ç®—(é¿å…è¶…è¿‡æ¨¡å‹é™åˆ¶)
- æ™ºèƒ½æ‘˜è¦(æ—§æ¶ˆæ¯è‡ªåŠ¨æ€»ç»“)
- ä¸»é¢˜æå–(ä»å¯¹è¯ä¸­æå–å…³é”®è¯é¢˜)

**CostCalculator**:
- å®æ—¶æˆæœ¬è®¡ç®—(GPT-4, GPT-3.5-turbo)
- ä½¿ç”¨å†å²è¿½è¸ª
- ä¼šè¯æˆæœ¬ä¼°ç®—
- æŒ‰æ¨¡å‹çš„æˆæœ¬åˆ†æ

**ç¤ºä¾‹**:
```javascript
const manager = new ConversationManager(4000); // Max 4K tokens
const optimized = manager.getOptimizedHistory(systemPrompts);
// è‡ªåŠ¨å‹ç¼©å¯¹è¯,ä¿ç•™é‡è¦ä¸Šä¸‹æ–‡

const calculator = new CostCalculator();
const cost = calculator.calculateCost(1000, 500, 'gpt-4');
// { inputCost: 0.03, outputCost: 0.03, totalCost: 0.06 }
```

#### 5. AI åé¦ˆè§£æå™¨ (Day 4) âœ…

**æ–‡ä»¶**: `/src/services/feedbackParser.js`

**åŠŸèƒ½**:
- **æ™ºèƒ½è§£æ**: æ”¯æŒ JSON å’Œçº¯æ–‡æœ¬æ ¼å¼
- **åˆ†æ•°æå–**: å¤šç§æ ¼å¼(Score: 85, 85/100, 8.5/10)
- **ç»“æ„åŒ–è¾“å‡º**: ç»Ÿä¸€çš„åé¦ˆæ ¼å¼
- **æƒ…æ„Ÿåˆ†æ**: åŸºäºå…³é”®è¯çš„åˆ†æ•°ä¼°ç®—
- **ç±»åˆ«è¯„åˆ†**: è‡ªåŠ¨åˆ†ç±»åˆ°é—®é¢˜è§£å†³ã€ä»£ç è´¨é‡ã€æ²Ÿé€šç­‰
- **æŠ€æœ¯è¯„ä¼°**: æå–å¤æ‚åº¦åˆ†æ

**å¤„ç†çš„æ ¼å¼**:
1. JSON å“åº” â†’ ç›´æ¥è§£æ
2. Markdown æ ¼å¼ â†’ æå–ç« èŠ‚å’Œè¦ç‚¹
3. çº¯æ–‡æœ¬ â†’ æ¨¡å¼åŒ¹é…å’Œæƒ…æ„Ÿåˆ†æ

#### 6. é›†æˆæ‰€æœ‰ç»„ä»¶ (Day 4-5) âœ…

**æ›´æ–°**: `/src/services/openai.js`

**æ–°å¢åŠŸèƒ½**:
```javascript
// ä»£ç åˆ†æ
const analysis = openAIService.analyzeCode(code, 'python');

// ä»£ç æ´å¯Ÿ
const insights = openAIService.getCodeInsights();

// æˆæœ¬è¿½è¸ª
const costSummary = openAIService.getCostSummary();

// å¯¹è¯æ‘˜è¦
const summary = openAIService.getConversationSummary();

// å¯¼å‡ºä¼šè¯
const sessionData = openAIService.exportSession();
```

---

### ğŸ¯ Week 2 æŠ€æœ¯äº®ç‚¹

#### 1. ä»£ç åˆ†æé©±åŠ¨çš„æ™ºèƒ½çŠ¶æ€æœº

ä¹‹å‰çš„çŠ¶æ€æœºåªä¾èµ–æ—¶é—´å’Œç”¨æˆ·è¾“å…¥,ç°åœ¨:
- åˆ†æä»£ç å¤æ‚åº¦
- æ£€æµ‹ç®—æ³•æ¨¡å¼
- è¯„ä¼°ä»£ç è´¨é‡
- æ™ºèƒ½åˆ¤æ–­è¿›åº¦

#### 2. æˆæœ¬ä¼˜åŒ–

**Token ç®¡ç†**:
- è‡ªåŠ¨å‹ç¼©å¯¹è¯å†å²
- ä¿ç•™æœ€ç›¸å…³çš„ä¸Šä¸‹æ–‡
- ä¼°ç®—æ¯æ¬¡è°ƒç”¨æˆæœ¬

**é¢„è®¡èŠ‚çœ**:
- å¯¹è¯å‹ç¼©å¯èŠ‚çœ ~40% tokens
- ä½¿ç”¨ GPT-3.5-turbo fallback å¯èŠ‚çœ ~90% æˆæœ¬

#### 3. ç”Ÿäº§çº§ Firebase Functions

**å®‰å…¨æ€§**:
- API keys å­˜å‚¨åœ¨ Firebase Secrets
- æ‰€æœ‰è°ƒç”¨éœ€è¦ç”¨æˆ·è®¤è¯
- è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†

**å¯è§‚æµ‹æ€§**:
- æ¯æ¬¡è°ƒç”¨è¿”å›ä½¿ç”¨æŒ‡æ ‡
- æˆæœ¬è¿½è¸ª
- é”™è¯¯æ—¥å¿—

#### 4. æ™ºèƒ½åé¦ˆè§£æ

æ— è®º AI è¿”å›ä»€ä¹ˆæ ¼å¼,éƒ½èƒ½è§£æ:
- JSON â†’ ç›´æ¥ä½¿ç”¨
- Markdown â†’ æå–ç»“æ„
- çº¯æ–‡æœ¬ â†’ æ¨¡å¼åŒ¹é…

ç¡®ä¿å‰ç«¯å§‹ç»ˆå¾—åˆ°ä¸€è‡´çš„æ•°æ®ç»“æ„ã€‚

---

### ğŸ“Š Week 2 ä»£ç ç»Ÿè®¡

**æ–°å¢æ–‡ä»¶**: 4 ä¸ª
- `functions/interviews/aiInterviewer.js` (~400 lines)
- `src/services/codeAnalyzer.js` (~600 lines)
- `src/services/conversationManager.js` (~350 lines)
- `src/services/feedbackParser.js` (~450 lines)

**ä¿®æ”¹æ–‡ä»¶**: 2 ä¸ª
- `src/services/interviewStateMachine.js` (+100 lines)
- `src/services/openai.js` (+50 lines)

**æ€»è®¡**: ~2000+ è¡Œé«˜è´¨é‡ä»£ç 

---

### ğŸ”¬ æµ‹è¯•ç”¨ä¾‹

**ä»£ç åˆ†æå™¨æµ‹è¯•**:
```javascript
const code = `
def two_sum(nums, target):
    seen = {}
    for i, num in enumerate(nums):
        complement = target - num
        if complement in seen:
            return [seen[complement], i]
        seen[num] = i
`;

const analysis = analyzeCode(code);
// complexity: { timeComplexity: 'O(n)', spaceComplexity: 'O(n)' }
// patterns: { usesHashMap: true }
// quality: { score: 80 }
// progress: 95
```

---

### ğŸ’° æˆæœ¬åˆ†æ

**ä¼°ç®—**(åŸºäº 100 ä¸ªç”¨æˆ·,æ¯æœˆ):
- æ¯ä¸ªç”¨æˆ·å¹³å‡ 8 ä¸ªä¼šè¯
- æ¯ä¸ªä¼šè¯ ~20 æ¡æ¶ˆæ¯
- ä½¿ç”¨ GPT-4

**è®¡ç®—**:
```
100 users Ã— 8 sessions Ã— 20 messages Ã— 200 tokens/msg = 3.2M tokens/month
Input (60%): 1.92M tokens Ã— $0.03/1K = $57.60
Output (40%): 1.28M tokens Ã— $0.06/1K = $76.80
Total: $134.40/month
```

**ä¼˜åŒ–å**(ä½¿ç”¨å¯¹è¯å‹ç¼© + GPT-3.5-turbo fallback):
- å‹ç¼©èŠ‚çœ 40% tokens â†’ $80.64
- ä½¿ç”¨ GPT-3.5-turbo (å¤§éƒ¨åˆ†å¯¹è¯) â†’ $12-15/month

**æœ€ç»ˆæˆæœ¬**: ~$15-20/month (100 ä¸ªæ´»è·ƒç”¨æˆ·)

---

### ğŸš€ æ€§èƒ½ä¼˜åŒ–

#### å¯¹è¯å†å²ç®¡ç†
- **ä¹‹å‰**: å‘é€æ‰€æœ‰å†å²(å¯èƒ½ 10K+ tokens)
- **ç°åœ¨**: æ™ºèƒ½å‹ç¼©åˆ° 4K tokens
- **èŠ‚çœ**: ~60% tokens

#### çŠ¶æ€è½¬æ¢
- **ä¹‹å‰**: æ¯æ¬¡éƒ½é‡æ–°åˆ†æ
- **ç°åœ¨**: ç¼“å­˜åˆ†æç»“æœ
- **æé€Ÿ**: ~3x

#### åé¦ˆè§£æ
- **ä¹‹å‰**: å›ºå®šæ ¼å¼,AI ä¸é…åˆå°±å¤±è´¥
- **ç°åœ¨**: å¤šç§æ ¼å¼æ”¯æŒ,é²æ£’æ€§å¼º
- **æˆåŠŸç‡**: 95%+ â†’ 99%+

---

### ğŸ“ Week 2 å­¦åˆ°çš„ç»éªŒ

#### 1. Token ç®¡ç†å¾ˆé‡è¦

åœ¨å®é™…ä½¿ç”¨ä¸­,å¯¹è¯å†å²ä¼šå¿«é€Ÿå¢é•¿:
- 10 è½®å¯¹è¯ = ~2K tokens
- 20 è½®å¯¹è¯ = ~4K tokens
- 30 è½®å¯¹è¯ = ~6K tokens (è¶…è¿‡å¤§éƒ¨åˆ†æ¨¡å‹é™åˆ¶)

è§£å†³æ–¹æ¡ˆ:
- æ™ºèƒ½å‹ç¼©æ—§æ¶ˆæ¯
- ä¿ç•™ç³»ç»Ÿ prompt å’Œæœ€è¿‘ N æ¡
- æ‘˜è¦åŒ–ä¸­é—´å¯¹è¯

#### 2. ä»£ç åˆ†æç»™ AI è¶…èƒ½åŠ›

é€šè¿‡åˆ†æä»£ç :
- AI çŸ¥é“å€™é€‰äººä½¿ç”¨äº†ä»€ä¹ˆç®—æ³•
- AI çŸ¥é“ä»£ç è´¨é‡å¦‚ä½•
- AI å¯ä»¥æä¾›æ›´ç²¾å‡†çš„æç¤º

ç¤ºä¾‹:
```javascript
// æ£€æµ‹åˆ°ä½¿ç”¨äº†åŒæŒ‡é’ˆ
patterns: { usesTwoPointers: true }

// AI å¯ä»¥è¯´:
"Great! I see you're using the two-pointer technique.
Have you considered the edge case when the array is empty?"
```

#### 3. æˆæœ¬è¿½è¸ªæ˜¯å¿…é¡»çš„

æ²¡æœ‰è¿½è¸ª,æˆæœ¬ä¼šå¤±æ§:
- å¼€å‘æµ‹è¯•æ—¶ä¸å°å¿ƒå¾ªç¯è°ƒç”¨
- ç”¨æˆ·æ»¥ç”¨(åå¤é‡è¯•)
- é•¿å¯¹è¯æ¶ˆè€—å¤§é‡ tokens

è§£å†³:
- æ¯æ¬¡è°ƒç”¨è®°å½•æˆæœ¬
- è®¾ç½®å‘Šè­¦é˜ˆå€¼
- ç”¨æˆ·é™é¢

#### 4. é²æ£’çš„è§£æå¾ˆå…³é”®

AI çš„è¾“å‡ºä¸å¯é¢„æµ‹:
- æœ‰æ—¶è¿”å› JSON
- æœ‰æ—¶è¿”å› Markdown
- æœ‰æ—¶æ··åˆæ ¼å¼

éœ€è¦å¤šç§è§£æç­–ç•¥:
1. å°è¯• JSON
2. å°è¯•æ¨¡å¼åŒ¹é…
3. å¤‡ç”¨è§£æ
4. é»˜è®¤å€¼

---

### ğŸ”® Week 3 é¢„å‘Š

æ ¹æ®è®¡åˆ’,Week 3 å°†å®ç°:

1. **è¯­éŸ³é›†æˆ** ğŸ™ï¸
   - Whisper API for STT
   - OpenAI TTS for speech
   - è¯­éŸ³å·¥ä½œæµé›†æˆ

2. **å®æ—¶åŠŸèƒ½ä¼˜åŒ–**
   - Firestore ç›‘å¬å™¨
   - æ€§èƒ½ä¼˜åŒ–
   - ç¼“å­˜ç­–ç•¥

3. **æµ‹è¯•å’Œæ–‡æ¡£**
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - API æ–‡æ¡£

---

**çŠ¶æ€**: âœ… Week 2 ä»»åŠ¡å…¨éƒ¨å®Œæˆ,å‡†å¤‡è¿›å…¥ Week 3

---

*æœ€åæ›´æ–°: 2025-11-18*
*Engineer 3: AI Integration Specialist*
